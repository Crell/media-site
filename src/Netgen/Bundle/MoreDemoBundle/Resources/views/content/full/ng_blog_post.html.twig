{% extends ngbm.layoutTemplate %}

{% if not content.fields.line_intro.empty %}
    {% set meta_data = { 'description': content.fields.line_intro.value.xml.saveXML()|striptags|trim|truncate( 152 ) } %}
{% elseif not content.fields.full_intro.empty %}
    {% set meta_data = { 'description': content.fields.full_intro.value.xml.saveXML()|striptags|trim|truncate( 152 ) } %}
{% endif %}

{% block content %}
<div class="container">
<div class="view-type view-type-{{ viewType }} ng-blog-post {% if not content.fields.css_class.empty %}{{ content.fields.css_class.value.text }}{% endif %} clearfix">

    <h1 class="page-header">{{ ng_render_field( content.fields.title ) }}</h1>

    <div class="author">
        <p><small>
            {% if not content.fields.author_override.empty %}
                {{ ng_render_field( content.fields.author_override ) }}
            {% else %}
                {{ ngmore_owner( content ).name }}
            {% endif %}
        on {{ content.fields.publish_date.value.value|date( 'F j, Y.' ) }}
        </small></p>
    </div>

    {% if not content.fields.image.empty %}
        <div class="image">
            {{ ng_render_field(
                content.fields.image, {
                    'parameters': {
                        'alias': 'i1140'
                    }
                }
            ) }}
        </div>
    {% endif %}

    {% if not content.fields.full_intro.empty %}
        <div class="intro">
            {{ ng_render_field( content.fields.full_intro ) }}
        </div>
    {% endif %}

    {% if not content.fields.body.empty %}
        <div class="body">
            {{ ng_render_field( content.fields.body ) }}
        </div>
    {% endif %}

    {% if not content.fields.location.empty %}
        <div class="location">
            {{ ng_render_field( content.fields.location ) }}
        </div>
    {% endif %}

</div>
</div>
{% endblock %}
