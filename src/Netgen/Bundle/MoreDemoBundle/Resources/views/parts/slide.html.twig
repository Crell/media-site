{% macro image( content, field_name, alias_name, use_lazy_load ) %}
    {% import 'NetgenMoreDemoBundle:parts:content_fields.html.twig' as content_fields %}

    {% set field_name = field_name|default( 'image' ) %}
    {% set alias_name = alias_name|default( 'i1140' ) %}
    {% set use_lazy_load = use_lazy_load|default( false ) %}

    {% if content.fields[field_name] is defined and not ez_is_field_empty( content, field_name ) %}
        {% set image_alias = ez_image_alias( ez_field( content, field_name ), content.versionInfo, alias_name ) %}

        {% if use_lazy_load %}
            {{ ez_render_field(
                content,
                field_name, {
                    parameters: {
                        alt_text: content_fields.name( content ),
                        disable_src_attribute: true
                    },
                    attr: {
                        class: 'swiper-lazy',
                        'data-src': asset( image_alias.uri )
                    }
                }
            ) }}
        {% else %}
            {{ ez_render_field(
                content,
                field_name, {
                    parameters: {
                        alias: alias_name,
                        alt_text: content_fields.name( content )
                    }
                }
            ) }}
        {% endif %}
    {% endif %}
{% endmacro %}
